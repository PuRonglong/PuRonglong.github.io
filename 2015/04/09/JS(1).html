<!DOCTYPE html>
<html>

	<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<title>蒲荣龙的博客</title>
	<meta name="description" content="在HTML中使用JavaScript">

	<link rel="stylesheet" href="/css/bootstrap.css">
	<link rel="stylesheet" href="/css/main.css">
	<link rel="stylesheet" href="/css/code.css">
	<link rel="canonical" href="http://www.puronglong.com/2015/04/09/JS(1).html">
	<link rel="alternate" type="application/rss+xml" title="小龙龙的个人博客" href="http://www.puronglong.com/feed.xml">
</head>


	<body>

		<div class="pull-right right-sidebar">
	<p>标签：</p>
	
	<p>
	<a class="page-link" href="/tag/技术">技术</a>
	<span>（66）</span></p>
	
	<p>
	<a class="page-link" href="/tag/生活">生活</a>
	<span>（37）</span></p>
	
</div>
		
		<div class="pull-left left-sidebar">
			<ul class="header-list">
				<li><a class="page-link" href="/">Home</a></li>
				<li><a class="page-link" href="/about/">About</a></li>
				<li><a class="page-link" href="/feed.xml">RSS</a></li>
			</ul>
		</div>
		<div class="page-content">
			<div class="wrapper">
				<article class="post home" itemscope itemtype="http://schema.org/BlogPosting">

	<header class="post-header">
		<h1 class="post-title" itemprop="name headline">JS:在HTML中使用JavaScript</h1>
		<p class="post-meta">2015-04-09</p>
	</header>

	<div class="post-content" itemprop="articleBody">
		<h2 id="htmljavascript">在HTML中使用JavaScript</h2>

<p>本章内容：</p>

<ul>
  <li>使用<code class="highlighter-rouge">&lt;script&gt;</code>元素</li>
  <li>嵌入脚本与外部脚本</li>
  <li>文档模式对JavaScript的影响</li>
  <li>考虑禁用JavaScript的场景</li>
</ul>

<p>##2.1 <code class="highlighter-rouge">&lt;script&gt;</code>元素</p>

<p>HTML4.01为<code class="highlighter-rouge">&lt;script&gt;</code>定义了下列6个属性：</p>

<!-- more -->

<ul>
  <li>async:可选。表示应该立即下载脚本，但不应妨碍页面中的其他操作，比如下载其他资源或等待加载其他脚本。只对外部脚本文件有效</li>
  <li>charset:可选。表示通过src属性制定的代码的字符集。由于大多数浏览器会忽略它的值，因此这个属性很少有人用。</li>
  <li>defer:可选。小时脚本可以延迟到文档完全被解析和显示之后再执行。只对外部脚本文件有效。IE7及更早版本对嵌入脚本也支持这个属性。</li>
  <li>language:已废弃。原来用于表示编写代码使用的脚本语言。大多数浏览器会忽略这个属性，因此也没有必要再用了。</li>
  <li>src:可选。表示包含要执行代码的外部文件。</li>
  <li>type:可选。可以看成是language的替代属性；表示编写代码使用的脚本语言的内容类型(也称为MIME类型)。</li>
</ul>

<p>使用<code class="highlighter-rouge">&lt;script&gt;</code>元素的方式有两种：直接在页面中嵌入JavaScript代码和包含外部JavaScript文件</p>

<p>在解释器对<code class="highlighter-rouge">&lt;script&gt;</code>元素内部的所有代码求值完毕之前，页面中的其余内容都不会被浏览器加载或显示。</p>

<p>在使用<code class="highlighter-rouge">&lt;script&gt;</code>嵌入JavaScript代码时，记住不要在代码中的任何地方出现<code class="highlighter-rouge">&lt;/script&gt;</code>字符串。用转义字符”"解决这个问题</p>

<div class="highlighter-rouge"><pre class="highlight"><code>	<span class="kd">function</span> <span class="nx">sayScript</span><span class="p">(){</span>
		<span class="nx">alert</span><span class="p">(</span><span class="s2">"&lt;\/script&gt;"</span><span class="p">);</span>
	<span class="p">}</span>
</code></pre>
</div>

<p>外部JavaScript文件带有.js扩展名。但这个扩展名不是必需的，因为浏览器不会检查包含JavaScript的文件的扩展名。这样使得其他服务器端语言动态生成JavaScript代码也就成为了可能。但服务器通常还是需要看扩展名决定相应应用哪种MIME类型。如果不适用.js扩展名，请确保服务器能返回正确的MIME类型。</p>

<p>带有src属性的<code class="highlighter-rouge">&lt;script&gt;</code>元素不应该在其<code class="highlighter-rouge">&lt;script&gt;</code>和<code class="highlighter-rouge">&lt;/script&gt;</code>标签之间博阿含额外的JavaScript代码。否则会被忽略。</p>

<p>另外，通过<code class="highlighter-rouge">&lt;script&gt;</code>元素的src属性还可以包含来自外部域的JavaScript文件。这一点既让<code class="highlighter-rouge">&lt;script&gt;</code>元素倍显强大，又让它备受争议。</p>

<p>在第一个<code class="highlighter-rouge">&lt;script&gt;</code>元素包含的代码解析完成后，第二个<code class="highlighter-rouge">&lt;script&gt;</code>包含的代码才会被解析，然后才是第三个，第四个······</p>

<p>###2.1.1 标签的位置</p>

<p>为了表面浏览器在呈现页面时出现明显的延迟，现代Web应用程序一般都把全部JavaScript引用放在&lt;body&gt;元素中页面内容的后面</p>

<p>###2.1.2 延迟脚本</p>

<p>在<code class="highlighter-rouge">&lt;script&gt;</code>元素中设置defer属性，脚本会被延迟到整个页面都解析完毕后再运行。相当于告诉浏览器立即下载，但延迟执行。</p>

<div class="highlighter-rouge"><pre class="highlight"><code>	<span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"text/javascript"</span> <span class="na">defer=</span><span class="s">"defer"</span> <span class="na">src=</span><span class="s">"example.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
</code></pre>
</div>

<p>在现实当中，延迟脚本并不一定会按照顺序执行，也不一定会在DOMContentLoaded事件触发前执行，因此最好只包含一个延迟脚本。为了避免有些不支持的浏览器，把延迟脚本放在页面底部仍然是最佳选择。</p>

<p>defer属性只适用于外部脚本文件。这一点在HTML5中已经明确规定，因此支持HTML5的实现会忽略给嵌入脚本设置的defer属性。</p>

<p>###2.1.3 异步脚本</p>

<p>与defer类似，这个属性用于改变处理脚本的行为，且只适用于外部脚本文件，并告诉浏览器立即下载文件。但与defer不同的是，标记为async的脚本并不保证按照指定它们的先后顺序执行。</p>

<p>指定async属性的目的是不让页面等待两个脚本下载和执行，从而异步加载页面其他内容。</p>

<p>异步脚本一定会在页面的load事件前执行。</p>

<p>###2.1.4 在XHTML中的用法</p>

<p>比较语句a &lt; b中的小于号(&lt;)在XHTML中将被当作开始一个新的标签来解析。但是作为标签来讲，小于号后面不能跟空格，因此就会导致语法错误。</p>

<p>避免在XHTML中出现类似语法错误的方法有两个。</p>

<ul>
  <li>
    <p>一是用相应的HTML实体(&lt;)替换代码中所有的小于号(&lt;)。</p>
  </li>
  <li>
    <p>二是用一个CData片段来包含JavaScript代码。</p>
  </li>
</ul>

<p>###2.1.5 不推荐使用的语法</p>

<p>让不支持<code class="highlighter-rouge">&lt;script&gt;</code>元素的浏览器能够隐藏嵌入的JavaScript代码。一个方案就是把JavaScript代码包含在一个HTML注释中</p>

<div class="highlighter-rouge"><pre class="highlight"><code>	<span class="nt">&lt;script&gt;</span><span class="c">&lt;!--</span>
	<span class="kd">function</span> <span class="nx">sayHi</span><span class="p">(){</span>
		<span class="nx">alert</span><span class="p">(</span><span class="s2">"Hi!"</span><span class="p">);</span>
	<span class="p">}</span>
	<span class="o">--&gt;</span><span class="nt">&lt;/script&gt;</span>
</code></pre>
</div>

<p>虽然这种注释JavaScript代码的格式得到了所有浏览器的认可，也能被正确解释，但由于所有浏览器都已经支持JavaScript，因此也就没有必要在使用这种格式了。</p>

<p>##2.2 嵌入代码与外部文件</p>

<p>使用外部文件有以下优点：</p>

<ul>
  <li>可维护性</li>
  <li>可缓存：如果有两个页面都使用同一个文件，那么这个文件只需下载一次。因此，最终结果就是能够快速页面加载的速度</li>
  <li>适应未来</li>
</ul>

<p>##2.3 文档模式</p>

<p>IE5.5引入了文档模式的概念，而这个概念是通过使用文档类型(doctype)切换实现的。最初的两种文档模式是：<strong>混杂模式</strong>和<strong>标准模式</strong></p>

<p>虽然这两种模式主要影响CSS内容的呈现，但在某些情况下也会影响到JavaScript的解释执行。</p>

<p>##2.4 <code class="highlighter-rouge">&lt;noscript&gt;</code>元素</p>

<p>早期浏览器都面临一个特殊的问题，即当浏览器不支持JavaScript时如何让页面平稳地退化。</p>

<p>这个元素可以包含能够出席那在文档<code class="highlighter-rouge">&lt;body&gt;</code>中的任何HTML元素——<code class="highlighter-rouge">&lt;script&gt;</code>元素除外。包含在<code class="highlighter-rouge">&lt;noscript&gt;</code>元素中的内容只有在下列情况下才会显示出来：</p>

<ul>
  <li>浏览器不支持脚本；</li>
  <li>浏览器支持脚本，但脚本被禁用</li>
</ul>

<p>符合上述任何一个条件，浏览器都会显示<code class="highlighter-rouge">&lt;noscript&gt;</code>中的内容。而在除此之外的其他情况下，浏览器不会呈现<code class="highlighter-rouge">&lt;noscript&gt;</code>中的内容。</p>

<p>##2.5 小结</p>

<p>把JavaScript插入到HTML页面中要使用<code class="highlighter-rouge">&lt;script&gt;</code>元素。使用这个元素可以把JavaScript嵌入到HTML页面中，让脚本与标记混合在一起；也可以包含外部的JavaScript文件。而我们需要注意的地方有：</p>

<ul>
  <li>在包含外部JavaScript文件时，必须将src属性设置为指向相应文件的URL。</li>
  <li>所有<code class="highlighter-rouge">&lt;script&gt;</code>元素都会按照它们在页面中出现的先后顺序依次被解析。在不适用defer和async属性额情况下。</li>
  <li>由于浏览器会先解析完不适用defer属性的<code class="highlighter-rouge">&lt;script&gt;</code>元素中的代码，然后再解析后面的内容，所以一般应该把<code class="highlighter-rouge">&lt;script&gt;</code>元素放在页面最后，即主要内容后面，&lt;/body&gt;标签之前。</li>
  <li>使用defer属性可以让脚本在文档完全呈现之后再执行。</li>
  <li>使用async属性可以表示当前脚本不必等待其他脚本，也不必阻塞文档呈现。不能保证异步脚本按照它们在页面中出现的顺序执行。</li>
</ul>

<p>另外，使用<code class="highlighter-rouge">&lt;noscript&gt;</code>元素可以指定在不支持脚本的李兰器中显示的替代内容。但在启用了脚本的情况下，浏览器不会显示<code class="highlighter-rouge">&lt;noscript&gt;</code>元素中的任何内容。</p>

	</div>

</article>

			</div>
		</div>

		<a href="#" class="to-top">Top</a>

		<footer class="site-footer">

	<div class="wrapper">

		<div class="footer-col-wrapper">

			<div>
				<ul class="social-media-list">
					
					<li>
						<a href="https://github.com/puronglong"><span class="icon icon--github"><svg viewBox="0 0 16 16"><path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/></svg>
</span><span class="username">puronglong</span></a>

					</li>
					
				</ul>
			</div>

		</div>

	</div>

</footer>

<script type="text/javascript" src='/js/jquery.min.js'></script>

<script type="text/javascript">

	var a = "\n                                   _                                         \n _ __  _   _ _ __ ___  _ __   __ _| | ___  _ __   __ _   ___  __ _ _   _   _ \n| '_ \\| | | | '__/ _ \\| '_ \\ / _` | |/ _ \\| '_ \\ / _` | / __|/ _` | | | | (_)\n| |_) | |_| | | | (_) | | | | (_| | | (_) | | | | (_| | \\__ \\ (_| | |_| |  _ \n| .__/ \\__,_|_|  \\___/|_| |_|\\__, |_|\\___/|_| |_|\\__, | |___/\\__,_|\\__, | (_)\n|_|                          |___/               |___/             |___/     \n          _                                                                  \n  /\\  /\\ (_)                                                                 \n / /_/ / | |                                                                 \n/ __  /  | |                                                                 \n\\/ /_/   |_|            😃";
    console.info(a);

	document.addEventListener('visibilitychange', function() {
                document.title = document.hidden ? '崩溃了，来看一下':'小龙龙的个人博客~'
            });
</script>
<script type="text/javascript">
	var offsetTop = 300;
	var to_top_arrow = $('.to-top');
	$(window).scroll(function(){
		
		($(this).scrollTop() > offsetTop) ? to_top_arrow.addClass('to-top-arrow') : to_top_arrow.removeClass('to-top-arrow');
	});

	to_top_arrow.on('click', function(event){
		event.preventDefault();
		$('body,html').animate({
			scrollTop: 0,
			
		});
	});
</script>


	</body>

</html>
