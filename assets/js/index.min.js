$(document).ready(function(){function a(a,e){var t=a.width(),n=e.width(),o=a.height(),s=e.height();if(o<s){a.css({width:"auto",height:"100%"}),t=a.width(),n=e.width();var r=(t-n)/2;a.css("margin-left","-"+r+"px")}else{var c=(s-o)/2;a.css("margin-top",c+"px")}a.fadeIn()}function e(){var a=$("#search_input"),e=$(".search_result");a.focus(function(){$(".icon-search").css("color","#3199DB"),e.show()}),a.keyup(t(this.autoComplete)),$(document).click(function(a){"search_input"!==a.target.id&&"search_result"!==a.target.className&&"search_item"!==a.target.className&&($(".icon-search").css("color","#CAD3DC"),e.hide())})}function t(a,e){var t;return e=e||120,function(){var n=this,o=arguments,s=function(){a.apply(n,o)};clearTimeout(t),t=setTimeout(s,e)}}function n(a){a+="\n\n著作权归作者所有。\n商业转载请联系作者获得授权,非商业转载请注明出处。\n原文: "+location.href,$(".post-content").on("copy",function(e){(window.clipboardData||e.originalEvent.clipboardData).setData("text/plain",a),e.preventDefault()})}var o=$(".g-nav");if($("#menu-toggle").on("click",function(a){o.slideToggle(200),$(document).on("click",function(){o.slideUp(200)}),a.stopPropagation()}),o.on("click",function(a){a.stopPropagation()}),$(window).width()>695){var s=$(".g-header"),r=s.outerHeight(),c=$(".g-logo"),i=o.find("a"),l=$(".g-banner").attr("data-theme"),h=$(document).scrollTop();$(document).scroll(function(){var a=$(this).scrollTop(),e="nav-"+l;a>r?(a>3*r&&s.addClass("headerUp"),s.css({"background-color":"rgba(255, 255, 255, .98)","box-shadow":"0 1px 12px rgba(0, 0, 0, .08)"}),c.css({"background-size":"100% 100%"}),i.css("color","#666"),o.addClass(e)):(s.removeClass("headerUp"),s.css({"background-color":"transparent","box-shadow":"none"}),c.css({"background-size":"100% 100%"}),i.css("color","#fff"),o.removeClass(e)),h>a?s.addClass("headerDown"):s.removeClass("headerDown"),h=a})}$(".read-next-item section").each(function(){var a=$(this).height(),e=$(".read-next-item").height();$(this).css("margin-top",(e-a)/2+"px"),$(this).fadeIn()}),$(".read-next-item img").each(function(){a($(this),$(".read-next-item"))}),function(){for(var a=parseInt($("#total_pages").val()),e=parseInt($("#current_pages").val()),t=$("#base_url").val(),n="",o=e-7;o<e;o++)o>0&&1!==o?n+='<a href="'+t+"page"+o+'" class="page-link page-num">'+o+"</a>":1===o&&(n+='<a href="'+t+'" class="page-link page-num">'+o+"</a>");n+='<span class="page-link page-num active">'+e+"</span>";for(var s=e+1;s<=e+7;s++)s<=a&&(n+='<a href="'+t+"page"+s+'" class="page-link page-num">'+s+"</a>");$("#page-link-container").html(n)}(),e.prototype.autoComplete=function(){var a=this.value.toLowerCase();a.length?$(".icon-search").css("color","#3199DB"):$(".icon-search").css("color","#CAD3DC"),$.getJSON("../../search.json").done(function(e){var t="";for(var n in e){var o=e[n],s=o.title,r=o.tags,c=(o.url,s+r);""!==a&&c.toLowerCase().indexOf(a)>=0&&(t+='<a class="search_item" href="'+o.url+'">'+o.title+"</a>")}$(".search_result").html(t)})},new e,"true"===$("#nm-switch").val()&&function(){var a=$("body"),e=new Date,t=e.getHours();(t>=0&&t<=6||23===t)&&a.addClass("night-mode")}(),$(".post-content").on("mouseup",function(a){var e=window.getSelection();e.toString().length>=30&&n(e)}),$("a").attr("target","_blank")});