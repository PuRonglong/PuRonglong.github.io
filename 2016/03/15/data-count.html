<!DOCTYPE html>
<html>

	<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<title>蒲荣龙的博客</title>
	<meta name="description" content="  和凯明大大一起做完一个数据统计系统，总结一下~">

	<link rel="stylesheet" href="/css/bootstrap.css">
	<link rel="stylesheet" href="/css/main.css">
	<link rel="stylesheet" href="/css/code.css">
	<link rel="canonical" href="http://www.puronglong.com/2016/03/15/data-count.html">
	<link rel="alternate" type="application/rss+xml" title="小龙龙的个人博客" href="http://www.puronglong.com/feed.xml">
</head>


	<body>

		<div class="pull-right right-sidebar">
	<p>标签：</p>
	
	<p>
	<a class="page-link" href="/tag/技术">技术</a>
	<span>（66）</span></p>
	
	<p>
	<a class="page-link" href="/tag/生活">生活</a>
	<span>（37）</span></p>
	
</div>
		
		<div class="pull-left left-sidebar">
			<ul class="header-list">
				<li><a class="page-link" href="/">Home</a></li>
				<li><a class="page-link" href="/about/">About</a></li>
				<li><a class="page-link" href="/feed.xml">RSS</a></li>
			</ul>
		</div>
		<div class="page-content">
			<div class="wrapper">
				<article class="post home" itemscope itemtype="http://schema.org/BlogPosting">

	<header class="post-header">
		<h1 class="post-title" itemprop="name headline">数据统计系统</h1>
		<p class="post-meta">2016-03-15</p>
	</header>

	<div class="post-content" itemprop="articleBody">
		<blockquote>
  <p>和凯明大大一起做完一个数据统计系统，总结一下~</p>
</blockquote>

<p>最开始的时候，模板里用的是jquery.flot.js这样一个jquery的图表插件：</p>

<p><img src="/images/article/2016-3-15/1.png" alt="img" /></p>

<!-- more -->

<p>但是在使用的过程中常常发现一些问题，比如一般会出现这样的图表展示：</p>

<p><img src="/images/article/2016-3-15/2.png" alt="img" /></p>

<p>一般来说，图表展示横纵坐标都会有标签名的，用于告诉用户这个坐标是干什么用的，可是在jquery.flot里没有发现这一项配置，照理来说这样的功能应该是图表都应该有的吧，查找了一遍发现居然没有这项配置，无奈只得找找有没有解决办法了，google出来一个这个<a href="https://github.com/markrcote/flot-axislabels">flot-axislabels</a>。</p>

<p>这是一个<code class="highlighter-rouge">Axis Labels Plugin for Flot</code>，</p>

<p>还有当底部X横坐标刻度上的介绍比较长的时候，这时就不能横向展示了，否则会太拥挤，我们可以考虑将其竖着显示出来，可是呢，考虑到竖着的显示效果有点别扭，还是斜着放置比较合适，可是jquery.flot在这方面的处理又不太好，自定义程度不够。</p>

<p>就在找解决办法的时候，发现了别人在使用<code class="highlighter-rouge">eCharts</code>这个百度开源的一项图表展示工具。了解了一下发现一方面自定义程度高，一方面图表的动画效果不错，并且界面整洁，体验大大提高，于是决定采用这个图表库了。</p>

<p><img src="/images/article/2016-3-15/3.png" alt="img" /></p>

<p>下一步的问题就是如何把eCharts集成到项目中去。项目是使用的angular框架，那么问题就是如何在angular项目的适当位置使用我们的echarts呢？大概的想法应该是从angular的directive入手，以属性的方式自定义一个指令，在需要使用echarts的地方调用这个指令。</p>

<p>首先在项目中引入echarts文件：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>    js/libs/echarts-all.js
</code></pre>
</div>

<p>创建并引入一个ui-echarts文件：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>    js/angualr/ui-echarts.js
</code></pre>
</div>

<p>上面这个文件就是我们需要写的指令所在处。</p>

<p>我们的HTML文件是这样的：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>    <span class="nt">&lt;div</span> <span class="na">class =</span><span class="err"> </span><span class="s">"col-xs-12"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">e-chart</span> <span class="na">ui-option =</span><span class="err"> </span><span class="s">"{

        }"</span><span class="err">&lt;/</span><span class="na">div</span><span class="nt">&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
</code></pre>
</div>

<p>这个e-chart指令就是我们要调用的指令，ui-option里面是我们的echarts配置，多次调试后配了一个好看点的：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>    <span class="p">{</span>
        <span class="nl">color</span><span class="p">:</span> <span class="p">[</span><span class="s1">'#23B7E5'</span><span class="p">],</span><span class="c1">//系列颜色</span>
        <span class="nx">title</span><span class="err">:</span><span class="p">{</span><span class="c1">//图表标题</span>
            <span class="nl">text</span><span class="p">:</span><span class="s1">'视频投票数'</span><span class="p">,</span>
            <span class="nx">subtext</span><span class="err">:</span><span class="s1">'数据来自——美甲大咖'</span><span class="p">,</span>
            <span class="nx">x</span> <span class="err">:</span> <span class="s1">'center'</span><span class="p">,</span>
        <span class="p">},</span>
        <span class="nx">tooltip</span><span class="err">:</span> <span class="p">{</span><span class="c1">//提示框</span>
            <span class="nl">show</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
            <span class="nx">trigger</span><span class="err">:</span> <span class="s1">'axis'</span><span class="p">,</span><span class="c1">//触发类型,默认是数据触发</span>
            <span class="nx">enterable</span><span class="err">:</span> <span class="kc">true</span><span class="p">,</span><span class="c1">//鼠标是否可进入气泡</span>
        <span class="p">},</span>
        <span class="nx">toolbox</span><span class="err">:</span><span class="p">{</span><span class="c1">//右上角工具栏</span>
            <span class="nl">show</span> <span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
            <span class="nx">feature</span> <span class="err">:</span> <span class="p">{</span>
                <span class="nl">mark</span> <span class="p">:</span> <span class="p">{</span><span class="nl">show</span><span class="p">:</span> <span class="kc">true</span><span class="p">},</span>
                <span class="nx">dataView</span> <span class="err">:</span> <span class="p">{</span><span class="nl">show</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="nx">readOnly</span><span class="err">:</span> <span class="kc">true</span><span class="p">},</span>
                <span class="nx">magicType</span> <span class="err">:</span> <span class="p">{</span><span class="nl">show</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="nx">type</span><span class="err">:</span> <span class="p">[</span><span class="s1">'line'</span><span class="p">,</span> <span class="s1">'bar'</span><span class="p">]},</span>
                <span class="nx">restore</span> <span class="err">:</span> <span class="p">{</span><span class="nl">show</span><span class="p">:</span> <span class="kc">true</span><span class="p">},</span>
                <span class="nx">saveAsImage</span> <span class="err">:</span> <span class="p">{</span><span class="nl">show</span><span class="p">:</span> <span class="kc">true</span><span class="p">}</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">dataZoom</span><span class="err">:</span><span class="p">{</span><span class="c1">//底部拖拽栏</span>
            <span class="nl">show</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span>
            <span class="nx">realtime</span><span class="err">:</span><span class="kc">true</span><span class="p">,</span><span class="c1">//缩放变化实时显示</span>
            <span class="nx">start</span><span class="err">:</span> <span class="mi">10</span><span class="p">,</span><span class="c1">//拖动条起始百分比位置</span>
            <span class="nx">end</span><span class="err">:</span> <span class="mi">90</span><span class="p">,</span>
            <span class="nx">handleColor</span><span class="err">:</span><span class="s1">'#008acd'</span><span class="p">,</span>
            <span class="nx">dataBackgroundColor</span><span class="err">:</span><span class="s1">'#efefff'</span><span class="p">,</span>
        <span class="p">},</span>
        <span class="nx">legend</span><span class="err">:</span> <span class="p">{</span><span class="c1">//图例</span>
            <span class="nl">data</span><span class="p">:[</span><span class="s1">'投票数'</span><span class="p">],</span>
            <span class="nx">x</span> <span class="err">:</span> <span class="s1">'left'</span><span class="p">,</span>
        <span class="p">},</span>
        <span class="nx">grid</span><span class="err">:</span> <span class="p">{</span><span class="c1">//控制图表边线与绘制的canvans边界距离</span>
            <span class="nl">y</span><span class="p">:</span> <span class="mi">80</span><span class="p">,</span>
            <span class="nx">y2</span><span class="err">:</span> <span class="mi">160</span><span class="p">,</span>
            <span class="p">},</span>
        <span class="nx">xAxis</span> <span class="err">:</span> <span class="p">[</span>
            <span class="p">{</span>
                <span class="na">name</span> <span class="p">:</span> <span class="s1">'视频期数'</span><span class="p">,</span>
                <span class="na">type</span> <span class="p">:</span> <span class="s1">'category'</span><span class="p">,</span>
                <span class="na">data</span> <span class="p">:</span> <span class="nx">vote_result_x</span><span class="p">,</span>
                <span class="na">nameTextStyle</span> <span class="p">:</span> <span class="p">{</span><span class="na">fontSize</span><span class="p">:</span><span class="mi">15</span><span class="p">},</span>
            <span class="p">}</span>
        <span class="p">],</span>
        <span class="nx">yAxis</span> <span class="err">:</span> <span class="p">[</span>
            <span class="p">{</span>
                <span class="na">name</span> <span class="p">:</span> <span class="s1">'投票数'</span><span class="p">,</span>
                <span class="na">type</span> <span class="p">:</span> <span class="s1">'value'</span><span class="p">,</span>
                <span class="na">nameTextStyle</span> <span class="p">:</span> <span class="p">{</span><span class="na">fontSize</span><span class="p">:</span><span class="mi">15</span><span class="p">},</span>
            <span class="p">}</span>
        <span class="p">],</span>
        <span class="nx">series</span> <span class="err">:</span> <span class="p">[</span><span class="c1">//数据图表</span>
            <span class="p">{</span>
                <span class="na">name</span><span class="p">:</span><span class="s1">'投票数'</span><span class="p">,</span>
                <span class="na">type</span><span class="p">:</span><span class="s1">'line'</span><span class="p">,</span>
                <span class="na">data</span><span class="p">:</span><span class="nx">vote_result_Y</span><span class="p">,</span><span class="c1">//Y轴数据</span>
                <span class="na">itemStyle</span><span class="p">:{</span>
                    <span class="na">normal</span><span class="p">:</span> <span class="p">{</span>
                        <span class="na">lineStyle</span><span class="p">:</span> <span class="p">{</span>
                            <span class="na">width</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
                            <span class="na">color</span><span class="p">:</span> <span class="s1">'#23B7E5'</span><span class="p">,</span>
                            <span class="na">shadowColor</span> <span class="p">:</span> <span class="s1">'rgba(0,0,0,0.5)'</span><span class="p">,</span>
                            <span class="na">shadowBlur</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
                            <span class="na">shadowOffsetX</span><span class="p">:</span> <span class="mi">8</span><span class="p">,</span>
                            <span class="na">shadowOffsetY</span><span class="p">:</span> <span class="mi">8</span><span class="p">,</span>
                        <span class="p">},</span>
                        <span class="na">barBorderRadius</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
                        <span class="na">label</span><span class="p">:</span> <span class="p">{</span><span class="na">show</span><span class="p">:</span> <span class="kc">true</span><span class="p">},</span>
                        <span class="na">areaStyle</span><span class="p">:</span> <span class="p">{</span><span class="na">type</span><span class="p">:</span> <span class="s1">'default'</span><span class="p">},</span><span class="c1">//是否显示区域面积</span>
                    <span class="p">},</span>
                    <span class="na">emphasis</span><span class="p">:{</span>
                        <span class="na">label</span><span class="p">:</span> <span class="p">{</span><span class="na">show</span><span class="p">:</span> <span class="kc">true</span><span class="p">},</span>
                    <span class="p">},</span>
                <span class="p">},</span>
                <span class="na">markPoint</span><span class="p">:{</span><span class="c1">//图表最大最小点</span>
                    <span class="na">data</span><span class="p">:[</span>
                        <span class="p">{</span><span class="na">type</span><span class="p">:</span><span class="s1">'max'</span><span class="p">,</span><span class="na">name</span><span class="p">:</span><span class="s1">'最大值'</span><span class="p">},</span>
                        <span class="p">{</span><span class="na">type</span><span class="p">:</span><span class="s1">'min'</span><span class="p">,</span><span class="na">name</span><span class="p">:</span><span class="s1">'最小值'</span><span class="p">},</span>
                    <span class="p">],</span>
                <span class="p">},</span>
                <span class="na">markLine</span><span class="p">:{</span><span class="c1">//图表平均线</span>
                    <span class="na">data</span><span class="p">:[</span>
                        <span class="p">{</span><span class="na">type</span><span class="p">:</span><span class="s1">'average'</span><span class="p">,</span><span class="na">name</span><span class="p">:</span><span class="s1">'平均值'</span><span class="p">}</span>
                    <span class="p">],</span>
                <span class="p">},</span>
            <span class="p">},</span>
        <span class="p">],</span>
    <span class="p">};</span>
</code></pre>
</div>
<p>我们引入了echarts文件，而在ui-echarts文件中要写的代码作用就是表明这里要调用echarts了。</p>

<p>指令的名字按照angular的规则来：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>    <span class="nx">angular</span><span class="p">.</span><span class="nx">modul</span><span class="p">(</span><span class="s1">'ui.echarts'</span><span class="p">,</span> <span class="p">[]).</span><span class="nx">directive</span><span class="p">(</span><span class="s1">'eChart'</span><span class="p">,</span> <span class="p">[</span><span class="kd">function</span><span class="p">(){</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="na">restrict</span><span class="p">:</span> <span class="s1">'A'</span><span class="p">,</span>
            <span class="na">link</span><span class="p">:</span> <span class="nx">link</span>
        <span class="p">};</span>
    <span class="p">}]);</span>
</code></pre>
</div>

<p>restrict: ‘A’告诉angular这个指令在DOM中以属性的形式被声明。</p>

<p>link：用来创建可以操作DOM的指令，这里是我们定义的一个link的函数。</p>

<p>完整是这样：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>    <span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">'ui.echarts'</span><span class="p">,</span> <span class="p">[]).</span><span class="nx">directive</span><span class="p">(</span><span class="s1">'eChart'</span><span class="p">,</span> <span class="p">[</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>

        <span class="kd">function</span> <span class="nx">link</span><span class="p">(</span><span class="nx">$scope</span><span class="p">,</span> <span class="nx">element</span><span class="p">,</span> <span class="nx">attrs</span><span class="p">)</span> <span class="p">{</span>

            <span class="c1">// 基于准备好的dom，初始化echarts图表</span>
            <span class="kd">var</span> <span class="nx">myChart</span> <span class="o">=</span> <span class="nx">echarts</span><span class="p">.</span><span class="nx">init</span><span class="p">(</span><span class="nx">element</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span><span class="c1">//实例化一个eCharts对象</span>

            <span class="c1">//监听options变化</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">attrs</span><span class="p">.</span><span class="nx">uiOptions</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">attrs</span><span class="p">.</span><span class="nx">$observe</span><span class="p">(</span><span class="s1">'uiOptions'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span><span class="c1">//监控uiOptions属性</span>
                    <span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="nx">$scope</span><span class="p">.</span><span class="nx">$eval</span><span class="p">(</span><span class="nx">attrs</span><span class="p">.</span><span class="nx">uiOptions</span><span class="p">);</span><span class="c1">//执行当前作用域下的表达式</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">angular</span><span class="p">.</span><span class="nx">isObject</span><span class="p">(</span><span class="nx">options</span><span class="p">))</span> <span class="p">{</span>
                        <span class="nx">myChart</span><span class="p">.</span><span class="nx">setOption</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
                    <span class="p">}</span>
                <span class="p">},</span> <span class="kc">true</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="p">{</span>
            <span class="na">restrict</span><span class="p">:</span> <span class="s1">'A'</span><span class="p">,</span>
            <span class="na">link</span><span class="p">:</span> <span class="nx">link</span>
        <span class="p">};</span>
    <span class="p">}]);</span>
</code></pre>
</div>

<p>一步一步说明一下：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>    <span class="kd">var</span> <span class="nx">myChart</span> <span class="o">=</span> <span class="nx">echarts</span><span class="p">.</span><span class="nx">init</span><span class="p">(</span><span class="nx">element</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
</code></pre>
</div>

<p>这是echarts文档给出的图表实例化方法，在这里我们实例化了这么一个echarts对象，但是在我们的表格中，我们提供了功能按钮用于不同类型的数据的选择，就是说我们的数据是会改变的，所以一开始获取到数据以后展现出图表，但是在数据变化的时候我们需要图表跟着变化，而我们的数据就是我们HTML文件里ui-option=”{}”下X和Y轴的数据：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>    <span class="nx">xAxis</span> <span class="err">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="na">name</span> <span class="p">:</span> <span class="s1">'最近视频期数'</span><span class="p">,</span>
            <span class="na">type</span> <span class="p">:</span> <span class="s1">'category'</span><span class="p">,</span>
            <span class="na">data</span> <span class="p">:</span> <span class="p">,</span>
            <span class="na">nameTextStyle</span> <span class="p">:</span> <span class="p">{</span><span class="na">fontSize</span><span class="p">:</span><span class="mi">15</span><span class="p">},</span>
        <span class="p">}</span>
    <span class="p">],</span>
    <span class="nx">yAxis</span> <span class="err">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="na">name</span> <span class="p">:</span> <span class="s1">'上传图片数'</span><span class="p">,</span>
            <span class="na">type</span> <span class="p">:</span> <span class="s1">'value'</span><span class="p">,</span>
            <span class="na">nameTextStyle</span> <span class="p">:</span> <span class="p">{</span><span class="na">fontSize</span><span class="p">:</span><span class="mi">15</span><span class="p">},</span>
        <span class="p">}</span>
    <span class="p">],</span>
    <span class="nx">series</span> <span class="err">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="na">name</span><span class="p">:</span><span class="s1">'上传图片数'</span><span class="p">,</span>
            <span class="na">smooth</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
            <span class="na">type</span><span class="p">:</span><span class="s1">'line'</span><span class="p">,</span>
            <span class="na">data</span><span class="p">:</span>
        <span class="p">}</span>
</code></pre>
</div>

<p>XAxis里的data就是x轴的数据，这里要注意的而是Y轴的数据并不是在yAxis里面定义，而是在series下的data里，这是容易犯错的一个地方。</p>

<p>我们知道是<code class="highlighter-rouge">ui-option</code>里的这些数据在变化了，那么我们就要监听<code class="highlighter-rouge">ui-option</code>的变化。</p>

<div class="highlighter-rouge"><pre class="highlight"><code>    <span class="kd">function</span> <span class="nx">link</span><span class="p">(</span><span class="nx">$scope</span><span class="p">,</span> <span class="nx">element</span><span class="p">,</span> <span class="nx">attrs</span><span class="p">)</span> <span class="p">{</span>

        <span class="c1">// 基于准备好的dom，初始化echarts图表</span>
        <span class="kd">var</span> <span class="nx">myChart</span> <span class="o">=</span> <span class="nx">echarts</span><span class="p">.</span><span class="nx">init</span><span class="p">(</span><span class="nx">element</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span><span class="c1">//实例化一个eCharts对象</span>

        <span class="c1">//监听options变化</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">attrs</span><span class="p">.</span><span class="nx">uiOptions</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">attrs</span><span class="p">.</span><span class="nx">$observe</span><span class="p">(</span><span class="s1">'uiOptions'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span><span class="c1">//监控uiOptions属性</span>
                <span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="nx">$scope</span><span class="p">.</span><span class="nx">$eval</span><span class="p">(</span><span class="nx">attrs</span><span class="p">.</span><span class="nx">uiOptions</span><span class="p">);</span><span class="c1">//执行当前作用域下的表达式</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">angular</span><span class="p">.</span><span class="nx">isObject</span><span class="p">(</span><span class="nx">options</span><span class="p">))</span> <span class="p">{</span>
                    <span class="nx">myChart</span><span class="p">.</span><span class="nx">setOption</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
                <span class="p">}</span>
            <span class="p">},</span> <span class="kc">true</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
</code></pre>
</div>

<p>上面attrs参数代表实例属性，是一个由定义在元素上的属性组成的标准化列表，</p>

<div class="highlighter-rouge"><pre class="highlight"><code>    <span class="k">if</span> <span class="p">(</span><span class="nx">attrs</span><span class="p">.</span><span class="nx">uiOptions</span><span class="p">)</span><span class="c1">//如果我们定义的ui-option这个属性存在的话，执行下步</span>
</code></pre>
</div>

<p><code class="highlighter-rouge">$observe</code>是属性对象上的方法，它是用来监控DOM属性上的值的变化，它仅用在指令内部，当你需要在指令内部监控包含有插值表达式的DOM属性的时候，就要用到这个方法。</p>

<p><code class="highlighter-rouge">$eval</code> 即<code class="highlighter-rouge">scope.$eval</code>，是执行当前作用域下的表达式，如：<code class="highlighter-rouge">scope.$eval('a+b');</code>而这个里的<code class="highlighter-rouge">a,b</code>是来自 <code class="highlighter-rouge">scope = {a: 2, b:3};</code></p>

<p><code class="highlighter-rouge">angular.isObject</code>判断给定的对象是否为object类型。</p>

<p>以上，就能生成我们的echarts图表了。</p>

<p><img src="/images/article/2016-3-15/4.png" alt="img" /></p>

<p>下面我们要给它添加一个功能。</p>

<p>通过左上的输入框可以选择横坐标的的间隔值，当输入框里的值改变时，视图也实时改变，思路是给这个input绑定一个ng-model=”photo.recentPhoto”，在js文件中设置一个默认值。</p>

<div class="highlighter-rouge"><pre class="highlight"><code>    <span class="nx">$scope</span><span class="p">.</span><span class="nx">photo</span> <span class="o">=</span> <span class="p">{</span>
        <span class="na">recentPhoto</span> <span class="p">:</span> <span class="mi">20</span>
    <span class="p">}</span>
</code></pre>
</div>

<p>然后进行监听：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>    <span class="nx">$scope</span><span class="p">.</span><span class="nx">$watch</span><span class="p">(</span><span class="s1">'photo'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">newVal</span><span class="p">,</span> <span class="nx">oldVal</span><span class="p">){</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">newVal</span> <span class="o">!=</span> <span class="nx">oldVal</span> <span class="o">&amp;&amp;</span> <span class="nx">newVal</span><span class="p">.</span><span class="nx">recentPhoto</span> <span class="o">!==</span> <span class="nx">old</span><span class="p">.</span><span class="nx">rencentPhoto</span><span class="p">){</span>
            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">newVal</span><span class="p">.</span><span class="nx">recentPhoto</span> <span class="o">||</span> <span class="nx">newVal</span><span class="p">.</span><span class="nx">recentPhoto</span> <span class="o">&lt;</span> <span class="mi">1</span> <span class="o">||</span> <span class="nx">newVal</span><span class="p">.</span><span class="nx">recentPhoto</span> <span class="o">&gt;</span> <span class="nx">$scope</span><span class="p">.</span><span class="nx">no</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">return</span><span class="p">;</span>
                <span class="p">}</span>
            <span class="nx">qjcPicCount</span><span class="p">(</span><span class="nx">$scope</span><span class="p">.</span><span class="nx">photo</span><span class="p">.</span><span class="nx">recentPhoto</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">})</span>
</code></pre>
</div>

<p>以上，监听这个输入框里的值，如果有所变化，则把新值传入要执行的函数中，如果这个值大于获取的最大值或小于1的话，直接return。</p>

<p>那么我们要执行的函数是什么呢？当然了，这个函数里要执行的操作就是我们需要通过接口获取到的x轴和y轴的数据，然后把这个值传给我们html文件的echarts的配置文件里的<code class="highlighter-rouge">photo_result_x</code>和<code class="highlighter-rouge">photo_result_y</code></p>

<div class="highlighter-rouge"><pre class="highlight"><code>    <span class="nx">xAxis</span> <span class="err">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="na">name</span> <span class="p">:</span> <span class="s1">'最近视频期数'</span><span class="p">,</span>
            <span class="na">type</span> <span class="p">:</span> <span class="s1">'category'</span><span class="p">,</span>
            <span class="na">data</span> <span class="p">:</span> <span class="p">,</span>
            <span class="na">nameTextStyle</span> <span class="p">:</span> <span class="p">{</span><span class="na">fontSize</span><span class="p">:</span><span class="mi">15</span><span class="p">},</span>
        <span class="p">}</span>
    <span class="p">],</span>
    <span class="nx">series</span> <span class="err">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="na">name</span><span class="p">:</span><span class="s1">'上传图片数'</span><span class="p">,</span>
            <span class="na">smooth</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
            <span class="na">type</span><span class="p">:</span><span class="s1">'line'</span><span class="p">,</span>
            <span class="na">data</span><span class="p">:</span>
        <span class="p">}</span>
</code></pre>
</div>

<p>要执行的函数：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>    <span class="kd">function</span> <span class="nx">qjcPicCount</span><span class="p">(</span><span class="nx">num</span><span class="p">)</span> <span class="p">{</span>

        <span class="nx">$http</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">"/svc/dakatongji/getNewestActivity"</span><span class="p">).</span><span class="nx">success</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>

            <span class="nx">$scope</span><span class="p">.</span><span class="nx">no</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">result</span><span class="p">.</span><span class="nx">no</span><span class="p">;</span>
            <span class="nx">$http</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">"/svc/dakatongji/qjcPicCount?num="</span> <span class="o">+</span> <span class="nx">num</span><span class="p">).</span><span class="nx">success</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>

                <span class="kd">var</span> <span class="nx">details</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">result</span><span class="p">.</span><span class="nx">details</span><span class="p">;</span>
                <span class="nx">utilsService</span><span class="p">.</span><span class="nx">formatDataByNo</span><span class="p">(</span><span class="nx">details</span><span class="p">,</span> <span class="nx">$scope</span><span class="p">.</span><span class="nx">no</span><span class="p">,</span> <span class="nx">$scope</span><span class="p">.</span><span class="nx">photo</span><span class="p">.</span><span class="nx">recentPhoto</span><span class="p">);</span>
                <span class="kd">var</span> <span class="nx">rs</span> <span class="o">=</span> <span class="nx">utilsService</span><span class="p">.</span><span class="nx">getFormatData</span><span class="p">(</span><span class="nx">details</span><span class="p">,</span> <span class="s2">"no"</span><span class="p">);</span>
                <span class="kd">var</span> <span class="nx">ls</span> <span class="o">=</span> <span class="nx">utilsService</span><span class="p">.</span><span class="nx">getFormatData</span><span class="p">(</span><span class="nx">details</span><span class="p">,</span> <span class="s2">"count"</span><span class="p">);</span>

                <span class="nx">$scope</span><span class="p">.</span><span class="nx">photo_result_x</span> <span class="o">=</span> <span class="nx">rs</span><span class="p">;</span>
                <span class="nx">$scope</span><span class="p">.</span><span class="nx">photo_result_y</span> <span class="o">=</span> <span class="nx">ls</span><span class="p">;</span>

            <span class="p">}).</span><span class="nx">error</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="nx">status</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"qjcPicCount in error"</span><span class="p">);</span>
            <span class="p">});</span>

        <span class="p">}).</span><span class="nx">error</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="nx">status</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"qjcPicCount in error"</span><span class="p">);</span>
        <span class="p">});</span>
    <span class="p">}</span>
</code></pre>
</div>

<p>具体返回的接口格式可以看接口文档，也可以在chrome调试工具里network下点击返回的js文件，在下面的preview可以查看到。</p>

<p><img src="/images/article/2016-3-15/10.png" alt="img" /></p>

<p>上面的<code class="highlighter-rouge">utilsService.getFormatData</code>是对获取数据进行的格式的一个处理，然后再把处理过后我们需要的格式的数据传给x轴和y轴：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>    <span class="nx">$scope</span><span class="p">.</span><span class="nx">photo_result_x</span> <span class="o">=</span> <span class="nx">rs</span><span class="p">;</span>
    <span class="nx">$scope</span><span class="p">.</span><span class="nx">photo_result_y</span> <span class="o">=</span> <span class="nx">ls</span><span class="p">;</span>
</code></pre>
</div>

<p>但是后来会发现有一个问题，什么问题呢？我们看上面的代码可以知道，当我们每次切换数据的时候，视图都会去加载新传入的数据，而如果这个数据是我们之前就加载过的，其实这样的数据没有必要重新加载，但它还是加载了，这样会造成数据切换很慢，特别是有大量数据的时候，频繁切换就不行了。所以我们可以把这部分的数据存起来，下次再遇到这个数据就不会重新去加载了，直接从存起来的数据里面去取。</p>

<p>所以我们可以先设置两个对象，分别用于缓存x轴和y轴的数据</p>

<div class="highlighter-rouge"><pre class="highlight"><code>    <span class="c1">//数据缓存</span>
    <span class="kd">var</span> <span class="nx">picDataCacheX</span> <span class="o">=</span> <span class="p">{};</span>
    <span class="kd">var</span> <span class="nx">picDataCacheY</span> <span class="o">=</span> <span class="p">{};</span>
</code></pre>
</div>

<p>然后函数里也做一些调整，如下：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>    <span class="kd">function</span> <span class="nx">qjcPicCount</span><span class="p">(</span><span class="nx">num</span><span class="p">)</span> <span class="p">{</span>

        <span class="k">if</span><span class="p">(</span><span class="nx">picDataCacheX</span><span class="p">[</span><span class="nx">num</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="nx">picDataCacheY</span><span class="p">[</span><span class="nx">num</span><span class="p">]){</span>
            <span class="nx">$scope</span><span class="p">.</span><span class="nx">photo_result_x</span> <span class="o">=</span> <span class="nx">picDataCacheX</span><span class="p">[</span><span class="nx">num</span><span class="p">];</span>
            <span class="nx">$scope</span><span class="p">.</span><span class="nx">photo_result_y</span> <span class="o">=</span> <span class="nx">picDataCacheY</span><span class="p">[</span><span class="nx">num</span><span class="p">];</span>
            <span class="k">return</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="nx">$http</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">"/svc/dakatongji/getNewestActivity"</span><span class="p">).</span><span class="nx">success</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>

            <span class="nx">$scope</span><span class="p">.</span><span class="nx">no</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">result</span><span class="p">.</span><span class="nx">no</span><span class="p">;</span>
            <span class="nx">$http</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">"/svc/dakatongji/qjcPicCount?num="</span> <span class="o">+</span> <span class="nx">num</span><span class="p">).</span><span class="nx">success</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>

                <span class="kd">var</span> <span class="nx">details</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">result</span><span class="p">.</span><span class="nx">details</span><span class="p">;</span>
                <span class="nx">utilsService</span><span class="p">.</span><span class="nx">formatDataByNo</span><span class="p">(</span><span class="nx">details</span><span class="p">,</span> <span class="nx">$scope</span><span class="p">.</span><span class="nx">no</span><span class="p">,</span> <span class="nx">$scope</span><span class="p">.</span><span class="nx">photo</span><span class="p">.</span><span class="nx">recentPhoto</span><span class="p">);</span>
                <span class="kd">var</span> <span class="nx">rs</span> <span class="o">=</span> <span class="nx">utilsService</span><span class="p">.</span><span class="nx">getFormatData</span><span class="p">(</span><span class="nx">details</span><span class="p">,</span> <span class="s2">"no"</span><span class="p">);</span>
                <span class="kd">var</span> <span class="nx">ls</span> <span class="o">=</span> <span class="nx">utilsService</span><span class="p">.</span><span class="nx">getFormatData</span><span class="p">(</span><span class="nx">details</span><span class="p">,</span> <span class="s2">"count"</span><span class="p">);</span>

                <span class="nx">picDataCacheX</span><span class="p">[</span><span class="nx">num</span><span class="p">]</span> <span class="o">=</span> <span class="nx">rs</span><span class="p">;</span>
                <span class="nx">picDataCacheY</span><span class="p">[</span><span class="nx">num</span><span class="p">]</span> <span class="o">=</span> <span class="nx">ls</span><span class="p">;</span>

                <span class="nx">$scope</span><span class="p">.</span><span class="nx">photo_result_x</span> <span class="o">=</span> <span class="nx">rs</span><span class="p">;</span>
                <span class="nx">$scope</span><span class="p">.</span><span class="nx">photo_result_y</span> <span class="o">=</span> <span class="nx">ls</span><span class="p">;</span>

            <span class="p">}).</span><span class="nx">error</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="nx">status</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"qjcPicCount in error"</span><span class="p">);</span>
            <span class="p">});</span>

        <span class="p">}).</span><span class="nx">error</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="nx">status</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"qjcPicCount in error"</span><span class="p">);</span>
        <span class="p">});</span>
    <span class="p">}</span>
</code></pre>
</div>

<p>就是在获取到数据，并对数据格式化处理以后，将x轴的数据存入到<code class="highlighter-rouge">picDataCacheX[num]</code>，将y轴的数据存入<code class="highlighter-rouge">picDataCacheY[num]</code>，然后进入函数后，首先判断这两个对象有没有值，这两个对象的num属性的值就是我们传入的数组数据，如果有的话就直接把数据传给x和y轴，然后return。这样，就不用再去请求了。</p>

<p><img src="/images/article/2016-3-15/5.png" alt="img" /></p>

<p>下面这种数据形式：</p>

<p><img src="/images/article/2016-3-15/6.png" alt="img" /></p>

<p>这个表格使用了<code class="highlighter-rouge">angular ui grid</code></p>

<p><img src="/images/article/2016-3-15/11.png" alt="img" /></p>

<p>HTML如下：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>    <span class="nt">&lt;div</span> <span class="na">ng-grid=</span><span class="s">"gridOptions"</span> <span class="na">style=</span><span class="s">"min-height:420px;"</span><span class="nt">&gt;&lt;/div&gt;</span>
</code></pre>
</div>

<p>对<code class="highlighter-rouge">ui grid</code>进行配置：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>    <span class="nx">$scope</span><span class="p">.</span><span class="nx">gridOptions</span> <span class="o">=</span> <span class="p">{</span>
        <span class="na">data</span><span class="p">:</span> <span class="s1">'myData'</span><span class="p">,</span>
        <span class="na">columnDefs</span><span class="p">:</span> <span class="nx">$scope</span><span class="p">.</span><span class="nx">columnDefs</span><span class="p">,</span>
        <span class="na">enablePaging</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="na">showFooter</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="na">rowHeight</span><span class="p">:</span><span class="mi">60</span><span class="p">,</span>
        <span class="na">pagingOptions</span><span class="p">:</span> <span class="nx">$scope</span><span class="p">.</span><span class="nx">pagingOptions</span><span class="p">,</span>
        <span class="na">filterOptions</span><span class="p">:</span> <span class="nx">$scope</span><span class="p">.</span><span class="nx">filterOptions</span><span class="p">,</span>
        <span class="na">totalServerItems</span><span class="p">:</span> <span class="s1">'totalServerItems'</span><span class="p">,</span>
        <span class="na">multiSelect</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
        <span class="na">i18n</span><span class="p">:</span> <span class="s1">'zh_cn'</span>
    <span class="p">};</span>
</code></pre>
</div>

<p>这里data自然是我们要返回的数据了。</p>

<p><code class="highlighter-rouge">pagingOptions</code>配置如下：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>    <span class="nx">$scope</span><span class="p">.</span><span class="nx">pagingOptions</span> <span class="o">=</span> <span class="p">{</span>
        <span class="na">pageSizes</span><span class="p">:</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">50</span><span class="p">],</span>
        <span class="na">pageSize</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
        <span class="na">currentPage</span><span class="p">:</span> <span class="mi">1</span>
    <span class="p">};</span>
</code></pre>
</div>

<p><code class="highlighter-rouge">pageSize</code>数组是我们可以设置每一个页可以展示多少条数据，下面是默认值，currentPage表明默认显示第几页。</p>

<p>columnDefs是我们表格的格式和样式：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>    <span class="nx">$scope</span><span class="p">.</span><span class="nx">columnDefs</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">{</span><span class="na">field</span><span class="p">:</span> <span class="s1">'name'</span><span class="p">,</span> <span class="na">displayName</span><span class="p">:</span> <span class="s1">'图片'</span><span class="p">,</span> <span class="na">cellTemplate</span><span class="p">:</span> <span class="s1">'&lt;div style="width: 110px;margin: 0 auto;"&gt;&lt;img style="width: 100%;margin-left:10px;" src="" /&gt;&lt;/div&gt;'</span><span class="p">},</span>
        <span class="p">{</span><span class="na">field</span><span class="p">:</span> <span class="s1">'create_date'</span><span class="p">,</span> <span class="na">displayName</span><span class="p">:</span> <span class="s1">'创建时间'</span><span class="p">,</span> <span class="na">cellTemplate</span><span class="p">:</span> <span class="s2">"&lt;span&gt;&lt;/span&gt;"</span><span class="p">},</span>
        <span class="p">{</span><span class="na">field</span><span class="p">:</span> <span class="s1">'end_date'</span><span class="p">,</span> <span class="na">displayName</span><span class="p">:</span> <span class="s1">'结束时间'</span><span class="p">,</span> <span class="na">cellTemplate</span><span class="p">:</span> <span class="s1">'&lt;span&gt;&lt;/span&gt;'</span><span class="p">},</span>
        <span class="p">{</span><span class="na">field</span><span class="p">:</span> <span class="s1">'plat_times'</span><span class="p">,</span> <span class="na">displayName</span><span class="p">:</span> <span class="s1">'播放量'</span><span class="p">,</span> <span class="na">cellTemplate</span><span class="p">:</span> <span class="s1">'&lt;span&gt;&lt;/span&gt;'</span><span class="p">},</span>
        <span class="p">{</span><span class="na">field</span><span class="p">:</span> <span class="s1">'total'</span><span class="p">,</span> <span class="na">displayName</span><span class="p">:</span> <span class="s1">'评论数'</span><span class="p">,</span> <span class="na">cellTemplate</span><span class="p">:</span> <span class="s1">'&lt;span&gt;&lt;/span&gt;'</span><span class="p">},</span>
    <span class="p">];</span>
</code></pre>
</div>

<p><code class="highlighter-rouge">multiSelect</code>声明是否可以多选，否则只能选择一行。</p>

<p>下面这个表格使用了ui-bootstrap：</p>

<p><img src="/images/article/2016-3-15/7.png" alt="img" /></p>

<p><img src="/images/article/2016-3-15/9.png" alt="img" /></p>

<p>使用ui-bootstrap可以通过tabset标签进行tab页的切换：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>    <span class="nt">&lt;tabset</span> <span class="na">class=</span><span class="s">"tab-container"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;tab&gt;</span>
            <span class="nt">&lt;tab-heading&gt;</span>
                查询用户资料
            <span class="nt">&lt;/tab-heading&gt;</span>
            <span class="nt">&lt;table</span> <span class="na">class=</span><span class="s">"table table-striped m-b-none"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;/table&gt;</span>
        <span class="nt">&lt;/tab&gt;</span>

        <span class="nt">&lt;tab&gt;</span>
            <span class="nt">&lt;tab-heading&gt;</span>
                用户评论详情
            <span class="nt">&lt;/tab-heading&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"panel panel-default text-center"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"panel-heading"</span> <span class="na">style=</span><span class="s">"background-color: #3d89cc;color: #fff;font-size: 20px"</span><span class="nt">&gt;</span>
                    用户评论详情
                <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"table-responsive"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">ng-grid=</span><span class="s">"gridOptions"</span> <span class="na">style=</span><span class="s">"min-height:420px;"</span><span class="nt">&gt;&lt;/div&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;/tab&gt;</span>

        <span class="nt">&lt;tab&gt;</span>
            <span class="nt">&lt;tab-heading&gt;</span>
                用户交作业详情
            <span class="nt">&lt;/tab-heading&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"panel panel-default text-center"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"panel-heading"</span> <span class="na">style=</span><span class="s">"background-color: #3d89cc;color: #fff;font-size: 20px"</span><span class="nt">&gt;</span>
                    用户交作业详情
                <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"table-responsive"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;div</span> <span class="na">ng-grid=</span><span class="s">"gridOptionsHomework"</span> <span class="na">style=</span><span class="s">"min-height:420px;"</span><span class="nt">&gt;&lt;/div&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;/tab&gt;</span>
    <span class="nt">&lt;/tabset&gt;</span>
</code></pre>
</div>

<p>我们可以看到tabset标签下的每一个tab都是一个视窗，通过点击就可以切换，tab-heading是每个视窗的标题。但是这是0.xx.xx版本的使用，新版本的ui-bootstrap已经使用uib-tabset来替代tabset，uib-tab来替代tab了。</p>

<p>echarts还有好处就是图形形式切换比较方便：通过点击右上角的柱形选项就可以把线性图转变为柱形图了。</p>

<p><img src="/images/article/2016-3-15/8.png" alt="img" /></p>

	</div>

</article>

			</div>
		</div>

		<a href="#" class="to-top">Top</a>

		<footer class="site-footer">

	<div class="wrapper">

		<div class="footer-col-wrapper">

			<div>
				<ul class="social-media-list">
					
					<li>
						<a href="https://github.com/puronglong"><span class="icon icon--github"><svg viewBox="0 0 16 16"><path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/></svg>
</span><span class="username">puronglong</span></a>

					</li>
					
				</ul>
			</div>

		</div>

	</div>

</footer>

<script type="text/javascript" src='/js/jquery.min.js'></script>

<script type="text/javascript">

	var a = "\n                                   _                                         \n _ __  _   _ _ __ ___  _ __   __ _| | ___  _ __   __ _   ___  __ _ _   _   _ \n| '_ \\| | | | '__/ _ \\| '_ \\ / _` | |/ _ \\| '_ \\ / _` | / __|/ _` | | | | (_)\n| |_) | |_| | | | (_) | | | | (_| | | (_) | | | | (_| | \\__ \\ (_| | |_| |  _ \n| .__/ \\__,_|_|  \\___/|_| |_|\\__, |_|\\___/|_| |_|\\__, | |___/\\__,_|\\__, | (_)\n|_|                          |___/               |___/             |___/     \n          _                                                                  \n  /\\  /\\ (_)                                                                 \n / /_/ / | |                                                                 \n/ __  /  | |                                                                 \n\\/ /_/   |_|            😃";
    console.info(a);

	document.addEventListener('visibilitychange', function() {
                document.title = document.hidden ? '崩溃了，来看一下':'小龙龙的个人博客~'
            });
</script>
<script type="text/javascript">
	var offsetTop = 300;
	var to_top_arrow = $('.to-top');
	$(window).scroll(function(){
		
		($(this).scrollTop() > offsetTop) ? to_top_arrow.addClass('to-top-arrow') : to_top_arrow.removeClass('to-top-arrow');
	});

	to_top_arrow.on('click', function(event){
		event.preventDefault();
		$('body,html').animate({
			scrollTop: 0,
			
		});
	});
</script>


	</body>

</html>
