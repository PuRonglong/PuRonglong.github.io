<!DOCTYPE html>
<html>

	<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<title>蒲荣龙的博客</title>
	<meta name="description" content="  当使用系统自带的终端使用多了的时候，你会体会到许多不便之处，比如自动补全不够完善，比如界面单调，老早就知道iterm2+oh my zsh的组合，但知道看到一个别人的界面漂亮的不行，才终于打动我也更换成这样的搭配。">

	<link rel="stylesheet" href="/css/bootstrap.css">
	<link rel="stylesheet" href="/css/main.css">
	<link rel="stylesheet" href="/css/code.css">
	<link rel="canonical" href="http://www.puronglong.com/2016/04/06/mac-shell.html">
	<link rel="alternate" type="application/rss+xml" title="小龙龙的个人博客" href="http://www.puronglong.com/feed.xml">
</head>


	<body>

		<div class="pull-right right-sidebar">
	<p>标签：</p>
	
	<p>
	<a class="page-link" href="/tag/技术">技术</a>
	<span>（66）</span></p>
	
	<p>
	<a class="page-link" href="/tag/生活">生活</a>
	<span>（37）</span></p>
	
</div>
		
		<div class="pull-left left-sidebar">
			<ul class="header-list">
				<li><a class="page-link" href="/">Home</a></li>
				<li><a class="page-link" href="/about/">About</a></li>
				<li><a class="page-link" href="/feed.xml">RSS</a></li>
			</ul>
		</div>
		<div class="page-content">
			<div class="wrapper">
				<article class="post home" itemscope itemtype="http://schema.org/BlogPosting">

	<header class="post-header">
		<h1 class="post-title" itemprop="name headline">如何让终端优雅地装X</h1>
		<p class="post-meta">2016-04-06</p>
	</header>

	<div class="post-content" itemprop="articleBody">
		<blockquote>
  <p>当使用系统自带的终端使用多了的时候，你会体会到许多不便之处，比如自动补全不够完善，比如界面单调，老早就知道iterm2+oh my zsh的组合，但知道看到一个别人的界面漂亮的不行，才终于打动我也更换成这样的搭配。</p>
</blockquote>

<p>主要配置：<code class="highlighter-rouge">iTerm2 + zsh + oh-my-zsh + agnoster</code></p>

<p>先来看看那幅打动我的漂亮的命令行是什么样的吧~</p>

<p><img src="/images/article/2016-4-6/1.png" alt="img" /></p>

<!-- more -->

<p>讲真，这个命令行界面美哭了。而且iterm2又是免费的，简直良心有木有。于是决定动手换成这样，折腾起来却碰到不少坑，花了一天才配好，也把遇到的坑说明一下以作参考。</p>

<p>下面我将一步一步讲解配置过程：</p>

<p>1：</p>

<p>当然是下载我们的iterm2啦~</p>

<p><img src="/images/article/2016-4-6/2.png" alt="img" /></p>

<p>2：</p>

<p>打开iterm2。</p>

<p>3：</p>

<p>安装oh-my-zsh。</p>

<p>oh-my-zsh:</p>

<p><img src="/images/article/2016-4-6/3.png" alt="img" /></p>

<p>在iterm2中输入以下：</p>

<p><img src="/images/article/2016-4-6/4.png" alt="img" /></p>

<p>这里我装了几次都不行，连接有问题，进度一直是0%，愁死了，然后官网里给的另外一个方法需要使用wget，结果mac系统又没有自带wget命令，有需要先安装了wget，找了以下发现安装wget好麻烦，需要先下载wget，然后在命令行里进行解压，安装，看起来好麻烦我也就没有用wget安装oh-my-zsh了，还是试了多次第一种安装方法，终于有一次不知道怎么就连接上了，然后就装上了。PS：这里其实蠢了以下，后来才知道wget可以不用手动安装这么麻烦，我们有homebrew啊，执行：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>    brew install wget
</code></pre>
</div>

<p>后来我通过这样装上了wget命令。</p>

<p>4：</p>

<p>这样装好了iterm2和oh-my-zsh以后为了配成顶图那样的样子我们还要进行如下微调：</p>

<p>在iterm2的偏好设置的profile里，有一个window选项，在这里设置背景图和透明度，还有宽高和停靠选项。示例这里，用了一张雨水滴在窗户的图片为背景，透明度是30+，背景色为黑色，字体默认，字色大概为橙黄，停靠在bottom。</p>

<p>然后去<code class="highlighter-rouge">bing</code>搜索了找到了示例里的背景图，打开iterm2和示例对比，也没有太大区别了。</p>

<p>后来发现橙色现在看起来好看，但当命令多了以后，就有点乱了。</p>

<p>这个体验完后还是想换成oh-my-zsh推荐的agnoster主题。于是又开始折腾了。</p>

<p>5：</p>

<p>然后才发现弄错了，这样我其实还是使用的dash，只不过iterm2定制化了一下，这和zsh一点关系都没有。更别说使用0h-my-zsh了。</p>

<p>启动iTerm 2 默认使用dash改用zsh解决方法：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>    chsh -s /bin/zsh
</code></pre>
</div>

<p>以为这样就切换为zsh了，结果我还是天真了，知道看到好几次dash提示才知道我这还是dash，原来还要输入</p>

<div class="highlighter-rouge"><pre class="highlight"><code>    zsh
</code></pre>
</div>

<p>执行一下才算切换，好几个文章里都没有说明这点让我一直以为执行<code class="highlighter-rouge">chsh -s /bin/zsh</code>就行了。</p>

<p>6：</p>

<p>安装Powerline：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>    pip install powerline-status
</code></pre>
</div>

<p>如果没有，则先执行安装pip指令</p>

<div class="highlighter-rouge"><pre class="highlight"><code>    sudo easy_install pip
</code></pre>
</div>

<p>这里开始还以为这样就可以了结果发现界面还是乱码，原来弄错了一点powerline是一款非常好的代码提示状态栏，但是我们并没有装好powerline字体，原来这是两码东西啊，还以为我们<code class="highlighter-rouge">pip install powerline-status</code>就是字体呢。</p>

<p>7：</p>

<p>下载安装字体库：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>    git clone https://github.com/powerline/fonts.git ~/powerline-fonts
</code></pre>
</div>

<p>上面只是下载了字体，下载下来后需要cd到install.sh文件所在目录，执行安装命令，弄了半天都不知道install.sh在哪里。。。最后终于找到了：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>    source ~/powerline-fonts/install.sh
</code></pre>
</div>

<p>安装完成后提示所有字体均已下载到<code class="highlighter-rouge">/Users/superdanny/Library/Fonts</code>路径，如下：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>    All Powerline fonts installed to /Users/superdanny/Library/Fonts
</code></pre>
</div>

<p>8：</p>

<p>设置iTerm 2的<code class="highlighter-rouge">Regular Font</code>和<code class="highlighter-rouge">Non-ASCII Font</code>：</p>

<p>安装完字体库之后，把iTerm 2的设置里的Profile中的Text 选项卡中里的Regular Font和Non-ASCII Font的字体都设置成 Powerline的字体，我设置的字体是<code class="highlighter-rouge">12pt Meslo LG S DZ Regular for Powerline</code></p>

<p>9：</p>

<p>配色方案solarized：</p>

<p>要先下载：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>    $ git clone git://github.com/altercation/solarized.git
</code></pre>
</div>

<p>进入上面下载的工程的<code class="highlighter-rouge">solarized/iterm2-colors-solarized</code>下双击<code class="highlighter-rouge">Solarized Dark.itermcolors</code>和<code class="highlighter-rouge">Solarized Light.itermcolors</code>两个文件就可以把配置文件导入到iTerm2里.</p>

<p>通过load presets选择安装的配色主题。</p>

<p><img src="/images/article/2016-4-6/5.jpeg" alt="img" /></p>

<p>10:</p>

<p>使用agnoster主题。字体没有安装好的话使用这个主题会乱码。</p>

<p>进入~/.zshrc打开.zshrc文件，然后将<code class="highlighter-rouge">ZSH_THEME</code>后面的字段改为<code class="highlighter-rouge">agnoster</code>。ZSH_THEME=”agnoster”（agnoster即为要设置的主题）。</p>

<p>这里开始的时候还不知道怎么找.zshrc，原来.开头的文件mac都会默认将他们隐藏，这时候又得去查找怎么找到隐藏的文件，在终端输入：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>    defaults write com.apple.finder AppleShowAllFiles -bool true//显示

    defaults write com.apple.finder AppleShowAllFiles -bool false//隐藏
</code></pre>
</div>

<p>注意执行完显示隐藏后要重启finder才生效。怎么重启finder呢？</p>

<div class="highlighter-rouge"><pre class="highlight"><code>    killalll Finder
</code></pre>
</div>

<p>于是先执行显示，找到了文件后使用常用的文本编辑器sublime打开，然后修改主题。</p>

<p>矮油，真是麻烦死了，于是只得先去把vim学习一下，于是才有了那篇vim的博文，这样就不用来回切换。vim又是一个大坑，宝宝心里那个苦啊。当然那是熟练操作而言，这里这种小小的修改不用那么熟练掌握vim了。再说，题目让终端优雅地装X，不使用vim怎么能算有逼格呢，怎么能说是优雅呢？</p>

<p>11:</p>

<p>增加指令高亮效果——<code class="highlighter-rouge">zsh-syntax-highlighting</code>。</p>

<p>指令高亮效果作用是当用户输入正确命令时指令会绿色高亮，错误时命令红色高亮。</p>

<p>1）cd到.zshrc所在目录。这里要说明的是其实默认打开的就是.zshrc所在目录。</p>

<p>2）执行指令将工程克隆到当前目录</p>

<div class="highlighter-rouge"><pre class="highlight"><code>    git clone git://github.com/zsh-users/zsh-syntax-highlighting.git
</code></pre>
</div>

<p>3）打开.zshrc文件，在最后添加下面内容</p>

<div class="highlighter-rouge"><pre class="highlight"><code>    source XXX/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh
</code></pre>
</div>

<p>保存文件。</p>

<p>注意：xxx代表.zshrc所在目录</p>

<p>4）</p>

<div class="highlighter-rouge"><pre class="highlight"><code>    cd ~/.oh-my-zsh/custom/plugins
</code></pre>
</div>

<p>5）再次打开.zshrc文件，在最后面添加下面内容</p>

<div class="highlighter-rouge"><pre class="highlight"><code>    plugins=(zsh-syntax-highlighting)
</code></pre>
</div>

<p>完成以上以后基本上已经使用上iterm2 + oh-my-zsh了。</p>

<p>12：</p>

<p>可是看着每次打开看着那么多文件都是一个颜色太单调了，也不明显，于是折腾着想要怎么加上颜色：</p>

<p>先说Vim语法高亮吧。</p>

<p>在Vim中输入命令:syntax on激活语法高亮，若需要Vim启动时自动激活，在~/.vimrc中添加一行syntax on即可。</p>

<p>Mac OSX的ls是没有颜色的，需要设置。</p>

<p>1、打开～目录下的<code class="highlighter-rouge">.bash_profile</code>（没有此文件的话新建一个，注意前景有.，是隐藏文件）：vim .bash_profile</p>

<p>2、在.bash_profile里添加下面两个语句：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>    export CLICOLOR=1

    export LSCOLORS=1212121212121212121212
</code></pre>
</div>

<p>3、LSCOLORS的具体设置看下面：</p>

<p>LSCOLORS的1对应前景色，2对应背景色。</p>

<p>实际应用中，将1和2改成下面的字母——对应不同颜色。</p>

<p>LSCOLORS共有11组”12”设置，每组12对应文件类型为</p>

<p>1、   directory</p>

<p>2、   symbolic link</p>

<p>3、   socket</p>

<p>4、   pipe</p>

<p>5、   executable (可执行文件，x权限)</p>

<p>6、   block special</p>

<p>7、   character special</p>

<p>8、   executable with setuid bit set (setuid=Set User ID，属主身份)</p>

<p>9、   executable without setgid bit set</p>

<p>10、  directory writable to others, with sticky bit</p>

<p>11、  directory writable to others, without sticky bit</p>

<p>字母代表的颜色如下：</p>

<p>a     black</p>

<p>b     red</p>

<p>c     green</p>

<p>d     brown</p>

<p>e     blue</p>

<p>f     magenta</p>

<p>g     cyan</p>

<p>h     light grey</p>

<p>A     bold black, usually shows up as dark grey</p>

<p>B     bold red</p>

<p>C     bold green</p>

<p>D     bold brown, usually shows up as yellow</p>

<p>E     bold blue</p>

<p>F     bold magenta</p>

<p>G     bold cyan</p>

<p>H     bold light grey; looks like bright white</p>

<p>x     default foreground or background (透明)</p>

<p>我不设背景色，于是将所有2变成x。</p>

<p>文件夹颜色一般设为红色，蓝色或青色，我试了一下还是觉得蓝色好看</p>

<p>最后，我用的颜色设置为：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>    export LSCOLORS=exfxaxdxcxegedabagacad #指定颜色
</code></pre>
</div>

<p>13：</p>

<p>可是看着看着还是有点不习惯的地方就是命令行前面的前缀太长了。</p>

<p>在终端里面当前行会显示<code class="highlighter-rouge">username@FirstName-LastnamedeMacBook-Pro ~$</code></p>

<p>这里的username是当先登陆的用户名，@后面是机器名称，~是当前路径。我都用的是自己的全称puronglong，这样前缀就太长了。看着也烦，早就想去掉了。</p>

<p>找到一个以下方法：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>    vim .profile
    # append
    PS1="\W $ "
    # or
    # PS1 = "\w $"
    export $PS1
</code></pre>
</div>

<p>然而实验了一下发现并不能。愁。</p>

<p>还有一个方法可以在系统偏好设置 –&gt; 共享 –&gt; 更改电脑名称里把机器名称改短一点，这样是可以，可是前端的用户名还是有啊，机器名还是想保留自己名字只把后面的MacBook-Pro改为了MBP，这样还是很长诶~愁。</p>

<p>最后找到这个方法：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>    DEFAULT_USER="puronglong"  #增加这一项，可以隐藏掉路径前面那串用户名
</code></pre>
</div>

<p>在.zshsrc中添加这一行，引号里面要填的是你的用户名。</p>

<p>通过以上种种，最后终于用上干净整洁功能更完善的命令行了。</p>

<p>看看新效果：</p>

<p><img src="/images/article/2016-4-6/6.png" alt="img" /></p>

<p>终于折腾完了~</p>

	</div>

</article>

			</div>
		</div>

		<a href="#" class="to-top">Top</a>

		<footer class="site-footer">

	<div class="wrapper">

		<div class="footer-col-wrapper">

			<div>
				<ul class="social-media-list">
					
					<li>
						<a href="https://github.com/puronglong"><span class="icon icon--github"><svg viewBox="0 0 16 16"><path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/></svg>
</span><span class="username">puronglong</span></a>

					</li>
					
				</ul>
			</div>

		</div>

	</div>

</footer>

<script type="text/javascript" src='/js/jquery.min.js'></script>

<script type="text/javascript">

	var a = "\n                                   _                                         \n _ __  _   _ _ __ ___  _ __   __ _| | ___  _ __   __ _   ___  __ _ _   _   _ \n| '_ \\| | | | '__/ _ \\| '_ \\ / _` | |/ _ \\| '_ \\ / _` | / __|/ _` | | | | (_)\n| |_) | |_| | | | (_) | | | | (_| | | (_) | | | | (_| | \\__ \\ (_| | |_| |  _ \n| .__/ \\__,_|_|  \\___/|_| |_|\\__, |_|\\___/|_| |_|\\__, | |___/\\__,_|\\__, | (_)\n|_|                          |___/               |___/             |___/     \n          _                                                                  \n  /\\  /\\ (_)                                                                 \n / /_/ / | |                                                                 \n/ __  /  | |                                                                 \n\\/ /_/   |_|            😃";
    console.info(a);

	document.addEventListener('visibilitychange', function() {
                document.title = document.hidden ? '崩溃了，来看一下':'小龙龙的个人博客~'
            });
</script>
<script type="text/javascript">
	var offsetTop = 300;
	var to_top_arrow = $('.to-top');
	$(window).scroll(function(){
		
		($(this).scrollTop() > offsetTop) ? to_top_arrow.addClass('to-top-arrow') : to_top_arrow.removeClass('to-top-arrow');
	});

	to_top_arrow.on('click', function(event){
		event.preventDefault();
		$('body,html').animate({
			scrollTop: 0,
			
		});
	});
</script>


	</body>

</html>
