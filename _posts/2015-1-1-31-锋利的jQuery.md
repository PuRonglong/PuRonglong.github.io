---
layout: post
title: 三读《锋利的jQuery》(第二版)笔记
description: "JS DOM,"
tags: [读书笔记,JavaScript]
image:
  background: triangular.png
comments: true
share: true
---
>较久前读了一遍此书，再次温习一遍,梳理一下

<figure>
    <a href="http://img31.ddimg.cn/23/5/21049601-1_u_2.jpg">
        <img src="http://img31.ddimg.cn/23/5/21049601-1_u_2.jpg" alt="cover of the book" />
    </a>
    <figcaption>《锋利的jQuery》(第二版)</figcaption>
</figure>

<!--more-->

# 第一章  认识jQuery

## 1.1 JavaScript和JavaScript库

    1.1.1 JavaScript简介

JavaScript是Netscape公司开发的一种脚本语言(scripting language)。它的出现使得网页和用户之间实现了一种实时的，动态的和交互的关系，使网页可以包含更多活跃的元素和更加精彩的内容。JavaScript自身也存在弊端，即复杂的文档对象模型(DOM),不一致的浏览器实现和便捷的开发。至于JavaScript的历史，可以看看我收集的这篇：[JavaScript的真实历史，你知道吗？](http://www.html5cn.org/article-6696-1.html)

1.1.2 JavaScript库作用及对比

主要讲了一些js库的介绍，如：Prototype,Dojo,YUI,Ext Js,MooTools,jQuery等，每个JavaScript库都有各自的优点和缺点

## 1.2 加入jQuery

1.2.1 jQuery简介

由John Resig创建于2006年1月的开源项目

1.2.2 jQuery的优势

jQuery强调的理念是写得少，做得多，也就是那句著名的`write less,do more`。jQuery独特的选择器，链式操作，事件处理机制和封装完善的Ajax都是其他JavaScript库望尘莫及的。

优势：

(1)轻量级。寻求最好的压缩工具。

(2)强大的选择器。

(3)出色的DOM操作的封装。

(4)可靠的事件处理机制。

(5)完善的Ajax

(6)不污染顶级变量。

(7)出色的浏览器兼容性。

(8)链式操作方式。

(9)隐式迭代

(10)行为层与结构层完全分离

(11)丰富的插件支持

(12)完善的文档

(13)开源

1.3 jQuery代码的编写

1.3.1 配置jQuery环境

主要讲了配置和使用

1.3.2编写简单的jQuery代码

window.onload与$(document).ready()的对比

1.3.3 jQuery代码风格

链式。注释。

## 1.4 jQuery对象和DOM对象

1.4.1 DOM对象和jQuery对象简介

* 1.每一份DOM都可以表示成一棵树。
* 2.jQuery对象就是通过jQuery包装DOM对象后产生的对象。jQuery对象是jQuery独有的。在jQuery对象中无法使用DOM对象的任何方法。例如：`$(“#id”).innerHTML和$(“#id”)`.checked之类的写法都是错误的。

从学习jQuery开始就应当树立正确的观念，分清jQuery对象和DOM对象之间的区别。

1.4.2 jQuery对象和DOM对象的相互转换

1.jQuery对象转成DOM对象。jQuery提供了两种方法，[index]和get(index)。

2.DOM对象转成jQuery对象

平时用到的jQuery对象都是通过$()函数制造出来的，$()函数就是一个jQuery对象的制造工厂。

1.4.3 实例研究
首先，用DOM方式来判断复选框是否被选中，代码如下：
{% highlight JavaScript %}
$(document).ready(function(){
    var $cr = $("#cr");//jQuery对象
    var cr = $cr[0];//DOM对象，或者$cr.get(0)
    $cr.click(function(){
    if(cr.checked){//DOM方式判断
    alert("感谢你的支持！你可以继续操作！");
        }
    })
})
{% endhighlight %}

换一种方式，使用jQuery中的方法来判断选项是否被选中，代码如下：
{% highlight JavaScript %}
$(document).ready(function(){//等待DOM元素加载完毕
    var $cr = $("#cr");//jQuery对象
    $cr.click(function(){
    if($cr.is(":checked")){//jQuery方式判断
    alert("感谢你的支持！你可以继续操作！");
        }
    })
})
{% endhighlight %}

## 1.5解决jQuery和其它库的冲突

1.jQuery库在其它库之后导入

在其它库和jQuery库都被加载完毕后，可以在任何时候调用jQuery.noConflict()函数来讲变量$的控制权交给其他JavaScript库

如果不想给jQuery自定义备用名称，还想使用$而不管其它库的$()方法，同时又不想与其它库相冲突，那么可以使用以下两种解决方法。

其一：
jQuery.noConflict();
jQuery(function($){//使用jQuery设定页面加载时执行的函数
    
})

其二：
jQuery.noConflict();//将变量$的控制权让渡给prototype.js
(function($){//定义匿名函数并设置形参为$
    
})

2.jQuery库在其他库之前导入

如果jQuery库在其他库之前就导入了，那么可以直接使用"jQuery"来做一些jQuery的工作，同时，可以使用$()方法作为其他库的快捷方式。这里无需调用jQuery.noConflict()函数

## 1.6 jQuery开发工具和插件

1. Dreamweaver
Dreamweaver将可视布局工具，应用程序开发功能和代码编辑支持组合在一起

2.Aptana
Aptana是一个功能非常强大，开源和专注于Ajax开发IDE，功能强大，代价是占用电脑内存比较多。

3.jQueryWTP和Spket插件
这两款插件都可以是eclipse支持jQuery自动提示代码功能。

4.Visual Studio 2008

5.其他工具
由于jQuery本身就是JavaScript，因此也可以使用任意通用文本编辑器进行开发，例如EditPlus,EmEditor和VIM等等。

## 1.7 小结

第一章特意强调了代码风格和变量风格，jQuery对象和DOM对象，希望能引起注意。

# 第二章 jQuery选择器

选择器是jQuery的根基。

## 2.1 jQuery选择器是什么

1.CSS选择器

把CSS应用到网页中有三种方式，即行间样式表，内部样式表和外部样式表

2.jQuery选择器

jQuery中的选择器完全继承了CSS的风格。两者写法相似，但作用效果不同，CSS选择器找到元素后是**添加样式**，而jQuery选择器找到元素后是**添加行为**。

需要特别说明的是，jQuery中设计操作CSS样式的部分比单纯的CSS功能更为强大，并且拥有跨浏览器的兼容性。

## 2.2 jQuery选择器的优势

+ 1.简洁的写法

$()函数在很多JavaScript类库中都被作为一个选择函数来使用

+ 2. 支持CSS1到CSS3选择器

+ 3.完善的处理机制

这里完善的处理机制是指可以避免一些错误，比如获取网页中不存在的元素时也不会报错。

需要注意的是，$('#tt')获取的永远是对象，即使网页上没有此元素。因此当要用jQuery检查一个元素在网页上是否存在时，不能使用以下代码：
{% highlight JavaScript %}
if($("#tt")){
    //do something
}
{% endhighlight %}
而应该根据获取到元素的长度来判断，代码如下：
{% highlight JavaScript %}
if($("#tt").length>0){
    //do something
}
{% endhighlight %}
或者转化成DOM对象来判断，如：`if($("#tt")[0]){}`

## 2.3 jQuery选择器

在js中如果获取的是数组对象，当需要的时候就要把它循环出来

jQuery选择器分为基本选择器，层次选择器，过滤选择器和表单选择器。


### 2.3.1 基本选择器

通过元素id，class,和标签名等来查找DOM元素。

### 2.3.2 层次选择器

如果想通过DOM元素之间的层次关系来获取特定元素，例如后代元素，子元素，相邻元素和同辈元素等，层次选择器是一个非常好的选择

比如有空格，>,+,~

### 2.3.3 过滤选择器

过滤选择器主要是通过特定的过滤规则来筛选出所需的DOM元素，过滤规则与CSS中的伪类选择器语法相同，即选择器都以一个冒号开头。

基本过滤选择器如:first,:last,:not,:even等

内容过滤选择器如:contains(text),:empty,:has(selector),:parent等

可见性过滤选择器如:visible,:hidden

属性过滤选择器如:[attribute],[attribute=value],[attribute^=value],[attribute*=value]等

子元素过滤选择器如:nth-child,:first-child,:last-child,:only-child

注意：nth-child(index)的index是从1开始的，而:eq(index)是从0开始的。

表单对象属性过滤选择器：此选择器主要是对所选择的表单元素进行过滤，例如选择被选中的下拉框，多选框等元素。比如:enabled,:disabled,:checked,:selected

### 2.3.4 表单选择器

:input,:text,:password,:radio,:submit,:reset,:button等

利用这些选择器，能及其方便地获取到表单的某个或某类型的元素。

## 2.4 应用jQuery改写示例

## 2.5 选择器中的一些注意事项

### 2.5.1 选择器中含有特殊符号的注意事项

转义符转义，如：$("#id\\[i\\]");

属性选择器的@符号问题

假如使用1.3.1以上的版本，那么不需要在属性前添加@符号。

### 2.5.2 选择器中含有空格的注意事项

后代选择器和过滤选择器的不同

## 2.6 案例研究——某网站品牌列表的效果

## 2.7 其他选择器

### 2.7.1 jQuery提供的选择器的扩展

jQuery选择器是可以进一步扩展的

### 2.7.2 其他使用CSS选择器的方法

除了jQuery提供了强大的选择器支持外，也有其他一些JavaScript脚本也提供了CSS选择器的支持。

## 2.8 小结

本章详细讲解了jQuery中的各种类型的选择器。选择器是行为与文档内容之间连接的纽带，选择器的最终目的就是轻松地找到文档中的元素。


# 第3章 jQuery中的DOM操作

用于获取和操作网页中的数据，脚本和表现层对象。

## 3.1 DOM操作的分类

一般来说，DOM操作分为3个方面，即DOM Core(核心),HTML-DOM和CSS-DOM

## 3.2 jQuery中的DOM操作

每一份DOM都可以表示成一棵DOM树。对DOM的各种操作将围绕这DOM树而展开。

### 3.2.1 查找节点

1. 查找元素节点
2. 查找属性节点

### 3.2.2 创建节点

1. 创建元素节点
2. 创建文本节点
3. 创建属性节点

### 3.2.3 插入节点

### 3.2.4 删除节点

jQuery提供了三种删除节点的方法，即remove(),detach()和empty();

1.remove()方法

从DOM中删除所有匹配的元素。当某个节点用remove()方法删除后，该节点所包含的所有后代节点将同时被删除。

remove()方法也可以通过传递参数来选择性地删除元素。

2.detach()方法

也是从DOM中去掉所有匹配的元素。但需要注意的是，这个方法不会把匹配的元素从jQuery对象中删除，因而可以在将来再使用这些匹配的元素。与remove()不同的是，所有绑定的事件，附加的数据等都会保留下来。

比如，删除了一个元素，再重新追加此元素，发现它之前绑定的事件还在，如果使用remove()方法删除元素的话，那么它之前绑定的事件将失效。

3.empty()方法

清空节点，它能清空元素中的所有后代节点。注意是清空元素里的内容

3.2.5 复制节点

复制节点后，被复制的新元素并不具有任何行为。如果需要新元素也具有复制功能,可以如下所示：`$(this).clone(true).appendTo("body");//注意参数true

3.2.6 替换节点

如果要替换某个节点，jQuery提供了相应的方法，即rplaceWith()和replaceAll()。后者方法与replaceWith()方法的作用相同，只是颠倒了replaceWith()操作。

如果在替换之前，已经为元素绑定事件，替换后原先绑定的事件将会与被替换的元素一起消失，需要在新元素上重新绑定事件。

3.2.7 包裹节点

$("strong").wrap("<b></b>");//用<b>标签把<strong>元素包裹起来

1.wrapAll()方法

2.wrapInner()方法

$("strong").wrapInner("<b></b>");

运行代码后，发现<strong>标签内的内容被一对<b>标签包裹了，结果如下：

<strong title="选择你最喜欢的水果."><b>你最喜欢的水果是？</b></strong>

3.2.8 属性操作

在jQuery中，用attr()方法来获取和设置元素属性，removeAttr()方法来删除元素属性。

jQuery中的很多方法都是同一个函数实现获取和设置的，例如上面的attr()方法，既能设置元素属性的值，也能获取元素属性的值。类似的还有html(),text(),height(),width(),val(),和css()等方法。

jQuery1.6中新增了prop()和removeProp()，分别用来获取在匹配的元素集中的第一个元素的属性值和为匹配的元素删除设置的属性。

### 3.2.9 样式操作

1. 获取样式和设置样式

2. 追加样式：addClass()

如果有不同的class设定了同一样式属性，则后者覆盖前者。

3. 移除样式

removeClass()，可以以空格的方式删除多个class名

4. 切换样式   toggleClass()

5. 判断是否含有某个样式

hasClass()，这个方法是为了增强代码可读性而产生的。在jQuery内部实际上是调用了is()方法来完成这个功能的。该方法等价于如下代码：

$("p").is(".another");

3.2.10 设置和获取HTML，文本和值

1. html()方法：此方法类似于JavaScript的innerHTML属性，可以用来读取或者设置某个元素中的HTML内容。

注意：html()方法可以用于XHTML文档，但不能用于XML文档

2. text()方法：类似于JavaScript中的innerText属性，可以用来读取或者设置某个元素中的文本内容

3. val()方法

此方法类似于JavaScript中的value属性，可以用来设置和获取元素的值。







## 12.6 小结

有时候，只要静下心来，回头看一看，把视角放得开阔一些，问题就会变得很清楚。从`Tim Berners Lee`发明万维网(`World Wide Web`)至今，它的宏伟远景就没有改变过：

**Web的无所不在是它的魅力。保证任何人都能无障碍地使用它，是一个最基本的原则。**
